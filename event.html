<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loading...</title>
    <link rel="icon" type="image/png" href="bixpixlogo.png">
    <link rel="stylesheet" href="event.css">
    <script src="dropdown.js"></script>

    <script>
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');
        const event = decodeURIComponent(params.get('name'));
        const url = decodeURIComponent(params.get('url'));
        document.title = 'BixPix | ' + event;
    </script>

</head>
<body>
    <div id="dropdownContainer"></div>
    <h1 id="header">Best Pix for ...</h1>
    <script>
        let h = document.getElementById("header");
        h.textContent = 'Best Pix for ' + event + '!';
    </script>
    <p>or select another card:</p>
    <select class="dropdown__select" name="1750272266335::443b0000::f5190dfd:a049:55c2:bba6:e837d4f50d39" style="text-overflow:ellipsis;overflow:hidden;width:100%"><option data-url="#" hidden="" value="Selected">Events</option><option data-url="/mma/fightcenter/_/id/600051441/league/ufc" value="600051441">UFC Fight Night: Dern vs Ribas 2</option><option data-url="/mma/fightcenter/_/id/600051442/league/ufc" value="600051442">UFC 311: Makhachev vs. Moicano</option><option data-url="/mma/fightcenter/_/id/600051443/league/ufc" value="600051443">UFC Fight Night: Adesanya vs. Imavov</option><option data-url="/mma/fightcenter/_/id/600050481/league/ufc" value="600050481">UFC 312: Du Plessis vs. Strickland 2</option><option data-url="/mma/fightcenter/_/id/600051444/league/ufc" value="600051444">UFC Fight Night: Cannonier vs. Rodrigues</option><option data-url="/mma/fightcenter/_/id/600051445/league/ufc" value="600051445">UFC Fight Night: Cejudo vs. Song</option><option data-url="/mma/fightcenter/_/id/600051446/league/ufc" value="600051446">UFC Fight Night: Kape vs. Almabayev</option><option data-url="/mma/fightcenter/_/id/600051447/league/ufc" value="600051447">UFC 313: Pereira vs. Ankalaev</option><option data-url="/mma/fightcenter/_/id/600051448/league/ufc" value="600051448">UFC Fight Night: Vettori vs. Dolidze 2</option><option data-url="/mma/fightcenter/_/id/600051194/league/ufc" value="600051194">UFC Fight Night: Edwards vs. Brady</option><option data-url="/mma/fightcenter/_/id/600051449/league/ufc" value="600051449">UFC Fight Night: Moreno vs. Erceg</option><option data-url="/mma/fightcenter/_/id/600053226/league/ufc" value="600053226">UFC Fight Night: Emmett vs. Murphy</option><option data-url="/mma/fightcenter/_/id/600053165/league/ufc" value="600053165">UFC 314: Volkanovski vs. Lopes</option><option data-url="/mma/fightcenter/_/id/600053312/league/ufc" value="600053312">UFC Fight Night: Machado Garry vs. Prates</option><option data-url="/mma/fightcenter/_/id/600053455/league/ufc" value="600053455">UFC Fight Night: Sandhagen vs. Figueiredo</option><option data-url="/mma/fightcenter/_/id/600053073/league/ufc" value="600053073">UFC 315: Muhammad vs. Della Maddalena</option><option data-url="/mma/fightcenter/_/id/600053676/league/ufc" value="600053676">UFC Fight Night: Burns vs. Morales</option><option data-url="/mma/fightcenter/_/id/600053606/league/ufc" value="600053606">UFC Fight Night: Blanchfield vs. Barber</option><option data-url="/mma/fightcenter/_/id/600053672/league/ufc" value="600053672">UFC 316: Dvalishvili vs. O'Malley 2</option><option data-url="/mma/fightcenter/_/id/600053732/league/ufc" value="600053732">UFC Fight Night: Usman vs. Buckley</option><option data-url="/mma/fightcenter/_/id/600053795/league/ufc" value="600053795">UFC Fight Night: Hill vs. Rountree Jr.</option><option data-url="/mma/fightcenter/_/id/600053168/league/ufc" selected="" value="600053168">UFC 317: Topuria vs. Oliveira</option><option data-url="/mma/fightcenter/_/id/600054061/league/ufc" value="600054061">UFC Fight Night: Lewis vs. Teixeira</option><option data-url="/mma/fightcenter/_/id/600053891/league/ufc" value="600053891">UFC 318: Holloway vs Poirier 3</option><option data-url="/mma/fightcenter/_/id/600053545/league/ufc" value="600053545">UFC Fight Night: Whittaker vs. de Ridder</option><option data-url="/mma/fightcenter/_/id/600054244/league/ufc" value="600054244">UFC Fight Night: Albazi vs. Taira</option><option data-url="/mma/fightcenter/_/id/600054396/league/ufc" value="600054396">UFC Fight Night: Dolidze vs. Hernandez</option><option data-url="/mma/fightcenter/_/id/600054045/league/ufc" value="600054045">UFC 319: Du Plessis vs. Chimaev</option><option data-url="/mma/fightcenter/_/id/600054141/league/ufc" value="600054141">UFC Fight Night: Shanghai</option><option data-url="/mma/fightcenter/_/id/600054419/league/ufc" value="600054419">UFC Fight Night: Paris</option><option data-url="/mma/fightcenter/_/id/600053664/league/ufc" value="600053664">UFC Fight Night: San Antonio</option><option data-url="/mma/fightcenter/_/id/600054473/league/ufc" value="600054473">UFC 320</option><option data-url="/mma/fightcenter/_/id/600054482/league/ufc" value="600054482">UFC Fight Night: Vancouver</option></select>
    <p id="test">Loading...</p>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const dropdown = document.querySelector('select.dropdown__select');
            dropdown.value = id;
            if (dropdown) {
                dropdown.addEventListener("change", function () {
                    // Selecting the current option we are on in the dropdown
                    const selectedOption = dropdown.options[dropdown.selectedIndex];
                    // Getting the espn url for that option
                    const eventURL = selectedOption.getAttribute("data-url");
                    const eventValue = selectedOption.value;
                    const eventName = selectedOption.text
                    console.log("eventURL: " + eventURL + ", eventValue: " + eventValue);
                    if (eventURL) {
                        // Redirect to the selected fight card's page
                        window.location.href = `event.html?id=${eventValue}&url=${encodeURIComponent(eventURL)}&name=${encodeURIComponent(eventName)}`;
                    }
                });
            }
            const test = document.getElementById("test");
            test.textContent = `ID = ${id}, Event = ${event}, \n Url = ${url}`;
        });
    </script>
</body>
</html>